<hr>

<h3>Example: My Calendar Three Solution (Difference Array/TreeMap)</h3>
<p>This Java code solves the "My Calendar III" problem, which asks for the maximum number of concurrent events, also known as the <b>k-booking</b>. The approach uses a <b>Difference Array</b>, implemented with a <b>TreeMap</b> to maintain sorted intervals. The core logic involves recording a +1 increment at each `start` time and a -1 decrement at each `end` time. By iterating through the sorted keys and accumulating the changes (`cur`), we track the current number of active bookings, and the maximum value reached (`res`) is the final answer.</p>

<pre><code class="language-java">
<textarea hidden>
class MyCalendarThree {
    private Map<Integer, Integer> diff;

    public MyCalendarThree() {
        diff = new TreeMap<>();
    }

    public int book(int start, int end) {
        diff.put(start, diff.getOrDefault(start, 0) + 1);
        diff.put(end, diff.getOrDefault(end, 0) - 1);
        int res = 0, cur = 0;
        for (int delta : diff.values()) {
            cur += delta;
            res = Math.max(res, cur);
        }
        return res;
    }
}
</textarea>
</code></pre>
